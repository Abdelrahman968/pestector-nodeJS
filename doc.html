<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Classifier - File Upload Documentation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50">
    <header class="bg-green-700 text-white shadow-md">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-3xl font-bold">Plant Disease Classifier</h1>
            <p class="mt-2 text-green-100">API Documentation - File Upload Guide</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <section class="mb-12 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold text-green-800 mb-4">
                <i class="fas fa-leaf mr-2"></i>File Upload Overview
            </h2>
            <p class="text-gray-700 mb-4">
                The Plant Disease Classifier API allows you to upload plant images for disease identification.
                This document provides details on how to properly format your requests, the accepted file types,
                size limits, and expected responses.
            </p>

            <div class="bg-green-50 border-l-4 border-green-500 p-4 my-4">
                <p class="font-medium">API Endpoint:</p>
                <code class="bg-gray-100 px-2 py-1 rounded text-sm">/api/classify</code>
            </div>
        </section>

        <div class="grid md:grid-cols-2 gap-8">
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-green-800 mb-4">
                    <i class="fas fa-upload mr-2"></i>Upload Requirements
                </h2>

                <div class="space-y-4">
                    <div class="border-b pb-2">
                        <h3 class="font-medium text-gray-800">File Types</h3>
                        <p class="text-gray-600">Only image files are allowed (JPEG, PNG, GIF, etc.)</p>
                    </div>

                    <div class="border-b pb-2">
                        <h3 class="font-medium text-gray-800">Size Limit</h3>
                        <p class="text-gray-600">Maximum file size: <span class="font-semibold">10MB</span></p>
                    </div>

                    <div class="border-b pb-2">
                        <h3 class="font-medium text-gray-800">Authentication</h3>
                        <p class="text-gray-600">Required: API key via <code
                                class="bg-gray-100 px-1 rounded text-sm">X-API-Key</code> header</p>
                        <p class="text-gray-600">For registered users, JWT token is required for authentication.</p>
                    </div>

                    <div>
                        <h3 class="font-medium text-gray-800">Rate Limits</h3>
                        <p class="text-gray-600">100 requests per IP address every 15 minutes</p>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-green-800 mb-4">
                    <i class="fas fa-cogs mr-2"></i>Optional Parameters
                </h2>

                <div class="space-y-4">
                    <div class="border-b pb-2">
                        <h3 class="font-medium text-gray-800">use_gemini</h3>
                        <p class="text-gray-600">Set to <code class="bg-gray-100 px-1 rounded text-sm">true</code> to
                            use Gemini model for enhanced analysis</p>
                        <p class="text-gray-500 text-sm">Example: <code>?use_gemini=true</code></p>
                    </div>

                    <div>
                        <h3 class="font-medium text-gray-800">generate_report</h3>
                        <p class="text-gray-600">Set to <code class="bg-gray-100 px-1 rounded text-sm">true</code> to
                            generate a detailed PDF report</p>
                        <p class="text-gray-500 text-sm">Example: <code>?generate_report=true</code></p>
                    </div>
                </div>
            </section>
        </div>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-code mr-2"></i>Example Usage
            </h2>

            <div class="mb-6">
                <h3 class="font-medium text-gray-800 mb-2">cURL Example</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
curl -X POST "https://your-api-domain.com/api/classify?use_gemini=true&generate_report=true" \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@/path/to/your/plant-image.jpg"</pre>
            </div>

            <div class="mb-6">
                <h3 class="font-medium text-gray-800 mb-2">JavaScript Example</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
const form = new FormData();
form.append('file', fileInput.files[0]);

fetch('https://your-api-domain.com/api/classify?use_gemini=true&generate_report=true', {
  method: 'POST',
  headers: {
    'X-API-Key': 'YOUR_API_KEY',
    'Authorization': 'Bearer YOUR_JWT_TOKEN'
  },
  body: form
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('Error:', error));</pre>
            </div>

            <div class="mb-6">
                <h3 class="font-medium text-gray-800 mb-2">Python Example</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
import requests

url = "https://your-api-domain.com/api/classify"
params = {
    "use_gemini": "true",
    "generate_report": "true"
}
headers = {
    "X-API-Key": "YOUR_API_KEY",
    "Authorization": "Bearer YOUR_JWT_TOKEN"
}
files = {
    "file": open("/path/to/your/plant-image.jpg", "rb")
}

response = requests.post(url, params=params, headers=headers, files=files)
print(response.json())</pre>
            </div>

            <div class="mb-6">
                <h3 class="font-medium text-gray-800 mb-2">PHP Example</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
$url = "https://your-api-domain.com/api/classify?use_gemini=true&generate_report=true";
$headers = [
    "X-API-Key: YOUR_API_KEY",
    "Authorization: Bearer YOUR_JWT_TOKEN"
];
$cfile = new CURLFile('/path/to/your/plant-image.jpg', 'image/jpeg', 'plant-image.jpg');
$post = ['file' => $cfile];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);

echo $response;</pre>
            </div>
        </section>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-reply mr-2"></i>Response Format
            </h2>

            <div class="mb-4">
                <h3 class="font-medium text-gray-800 mb-2">Successful Response</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
{
  "status": "success",
  "prediction": {
    "disease": "Tomato Late Blight",
    "confidence": 0.95,
    "category": "Fungal Disease"
  },
  "processed_by": "node-middleware",
  "processing_time": "2025-03-04T10:30:45.123Z",
  "report_url": "/api/reports/report_12345.pdf",  // Only if generate_report=true
  "subscription_info": {
    "plan": "free",
    "scan_limit": 10,
    "scans_used": 5,
    "scans_remaining": 5,
    "has_advanced_analytics": false
  }
}</pre>
            </div>

            <div>
                <h3 class="font-medium text-gray-800 mb-2">Error Response</h3>
                <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm">
{
  "status": "error",
  "message": "Failed to classify image",
  "error": "Error description"
}</pre>
            </div>
        </section>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-file-pdf mr-2"></i>Accessing Generated Reports
            </h2>

            <p class="text-gray-700 mb-4">
                If you've requested a report with <code
                    class="bg-gray-100 px-1 rounded text-sm">generate_report=true</code>,
                you can download it using the <code class="bg-gray-100 px-1 rounded text-sm">report_url</code> from the
                response.
            </p>

            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 my-4">
                <p class="font-medium text-yellow-800">Report Endpoint:</p>
                <code class="bg-gray-100 px-2 py-1 rounded text-sm">/api/reports/{filename}</code>
                <p class="text-sm text-yellow-700 mt-2">
                    <i class="fas fa-info-circle mr-1"></i>API key and JWT token are required in the request header
                </p>
            </div>

            <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm mt-4">
// Example to download the PDF report
fetch('https://your-api-domain.com/api/reports/report_12345.pdf', {
  headers: {
    'X-API-Key': 'YOUR_API_KEY',
    'Authorization': 'Bearer YOUR_JWT_TOKEN'
  }
})
.then(response => response.blob())
.then(blob => {
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'plant_disease_report.pdf';
  document.body.appendChild(a);
  a.click();
  a.remove();
});</pre>
        </section>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-exclamation-triangle mr-2"></i>Common Errors
            </h2>

            <div class="overflow-x-auto">
                <table class="min-w-full bg-white">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 bg-gray-100 text-left text-gray-600 font-medium">Status Code</th>
                            <th class="py-2 px-4 bg-gray-100 text-left text-gray-600 font-medium">Error</th>
                            <th class="py-2 px-4 bg-gray-100 text-left text-gray-600 font-medium">Solution</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y">
                        <tr>
                            <td class="py-2 px-4">400</td>
                            <td class="py-2 px-4">No file uploaded</td>
                            <td class="py-2 px-4">Ensure you're attaching a file with the key 'file'</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4">400</td>
                            <td class="py-2 px-4">Only image files are allowed</td>
                            <td class="py-2 px-4">Upload only image formats (JPEG, PNG, etc.)</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4">403</td>
                            <td class="py-2 px-4">Invalid or missing API key</td>
                            <td class="py-2 px-4">Add a valid API key in the X-API-Key header</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4">403</td>
                            <td class="py-2 px-4">Invalid or missing JWT token</td>
                            <td class="py-2 px-4">Add a valid JWT token in the Authorization header</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4">413</td>
                            <td class="py-2 px-4">File too large</td>
                            <td class="py-2 px-4">Ensure file size is under 10MB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4">429</td>
                            <td class="py-2 px-4">Too many requests</td>
                            <td class="py-2 px-4">Wait 15 minutes before trying again</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-user-shield mr-2"></i>Authentication Details
            </h2>

            <p class="text-gray-700 mb-4">
                The API uses JWT (JSON Web Tokens) for user authentication. To authenticate, you need to include the JWT
                token in the <code class="bg-gray-100 px-1 rounded text-sm">Authorization</code> header.
            </p>

            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4">
                <p class="font-medium text-blue-800">Authentication Endpoint:</p>
                <code class="bg-gray-100 px-2 py-1 rounded text-sm">/api/auth/login</code>
                <p class="text-sm text-blue-700 mt-2">
                    <i class="fas fa-info-circle mr-1"></i>Use this endpoint to obtain a JWT token.
                </p>
            </div>

            <pre class="bg-gray-800 text-green-100 p-4 rounded-lg overflow-x-auto text-sm mt-4">
// Example to obtain JWT token
fetch('https://your-api-domain.com/api/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    username: 'your_username',
    password: 'your_password'
  })
})
.then(response => response.json())
.then(data => {
  console.log('JWT Token:', data.token);
})
.catch(error => console.error('Error:', error));</pre>
        </section>
    </main>

    <footer class="bg-green-800 text-white mt-12">
        <div class="container mx-auto px-4 py-6">
            <p class="text-center text-green-100">
                Plant Disease Classifier API © 2025
            </p>
        </div>
    </footer>
</body>

</html>